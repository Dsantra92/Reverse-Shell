from Server import *
from serverconnectionhandler import *

my_socket = ServerConnection()
port = 8080
my_socket.CreateConnection(port)
print(f"[+] Creating Socket And Binding It To Port {port}")
my_socket.Listen(3)
print("[+] Socket Is Listening For Connections")
my_conn , addr= my_socket.AcceptConnection()
print(f"[+] Connected To {addr[0]} On Port {addr[1]}")
my_socket.send_data("[+] Success")

i=0
key = 0

while i<3:
     passwd = input("[+] Enter Password : ")
     check = str(hash(passwd))
     my_socket.send_data(check)
     checksum = my_socket.recv_data()
     if checksum=="OKAY":
         key = 1
         break
     i=i+1

print(my_socket.recv_data())
serverhandler(my_socket)
print("[+] Exiting Server")
my_socket.end_conn()
